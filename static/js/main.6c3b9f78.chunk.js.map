{"version":3,"sources":["contexts/CurrentUserContext.js","utils/api.js","components/Popup.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/Footer.js","images/logo/logo_color_white.svg","components/Header.js","components/ImagePopup.js","components/Card.js","components/Main.js","components/PopupWithConfirmation.js","components/App.js","index.js"],"names":["CurrentUserContext","createContext","api","token","this","_url","_headers","authorization","res","ok","json","Promise","reject","status","fetch","method","headers","then","_onResponse","userInfo","body","JSON","stringify","name","about","avatarLink","avatar","link","cardId","isLiked","Popup","isOpen","onClose","children","documentWidth","document","documentElement","clientWidth","scrollBarWidth","window","innerWidth","useLayoutEffect","style","overflow","paddingRight","useEffect","closeByEscape","e","key","addEventListener","removeEventListener","className","onClick","target","currentTarget","type","PopupWithForm","title","buttonText","onSubmit","isLoading","AddPlacePopup","onPlaceAdd","useState","cardName","setCardName","cardImageLink","setCardImageLink","preventDefault","id","maxLength","minLength","placeholder","onChange","value","EditAvatarPopup","onUpdateAvatar","userAvatar","useRef","current","required","ref","EditProfilePopup","onUpdateUser","currentUser","useContext","setName","description","setDescription","Footer","Header","href","alt","src","headerLogo","ImagePopup","card","Card","cardData","onCardClick","onCardLike","onCardDeleteClick","likes","owner","_id","isOwn","galleryDeleteButtonClassName","some","like","galleryLikeButtonClassName","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","map","PopupWithConfirmation","App","setCurrentUser","setCards","selectedCard","setSelectedCard","cardToRemoveId","setCardToRemoveId","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isConfirmationPopupOpen","setIsConfirmationPopupOpen","isImagePopupOpen","setIsImagePopupOpen","setIsLoading","closeAllPopups","handlePopupLoader","getPlaces","places","catch","error","console","log","getUserInfo","r","Provider","changeLikeCardStatus","newCard","c","err","newAvatar","setUserAvatar","newFetchedAvatar","finally","newUserInfo","setUserInfo","newFetchedData","createNewPlace","newFetchedCard","removePlace","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"kLAEaA,EAAqBC,0B,cCmFnBC,EAFF,I,WAlFX,WAAaC,GAAS,oBACpBC,KAAKC,KAAO,yCACZD,KAAKE,SAAW,CACdC,cAAeJ,EACf,eAAgB,oB,+CAIpB,SAAYK,GACV,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,oDAA+BJ,EAAIK,W,yBAG5C,WACE,OAAOC,MAAM,GAAD,OAAKV,KAAKC,KAAV,aAA4B,CACtCU,OAAQ,MACRC,QAASZ,KAAKE,WACbW,KAAKb,KAAKc,e,yBAGf,SAAYC,GACV,OAAOL,MAAM,GAAD,OAAKV,KAAKC,KAAV,aAA4B,CACtCU,OAAQ,QACRC,QAASZ,KAAKE,SACdc,KAAMC,KAAKC,UACP,CACEC,KAAMJ,EAASI,KACfC,MAAOL,EAASK,UAGrBP,KAAKb,KAAKc,e,2BAGf,SAAcO,GACZ,OAAOX,MAAM,GAAD,OAAKV,KAAKC,KAAV,oBAAmC,CAC7CU,OAAQ,QACRC,QAASZ,KAAKE,SACdc,KAAMC,KAAKC,UACP,CACEI,OAAQD,MAGbR,KAAKb,KAAKc,e,uBAGf,WACE,OAAOJ,MAAM,GAAD,OAAKV,KAAKC,KAAV,SAAwB,CAClCU,OAAQ,MACRC,QAASZ,KAAKE,WACbW,KAAKb,KAAKc,e,4BAGf,YAAgC,IAAfK,EAAc,EAAdA,KAAMI,EAAQ,EAARA,KACrB,OAAOb,MAAM,GAAD,OAAKV,KAAKC,KAAV,SAAwB,CAClCU,OAAQ,OACRC,QAASZ,KAAKE,SACdc,KAAMC,KAAKC,UACP,CACEC,KAAMA,EACNI,KAAMA,MAGXV,KAAKb,KAAKc,e,kCAGf,SAAqBU,EAAQC,GAC3B,OAAOf,MAAM,GAAD,OAAKV,KAAKC,KAAV,uBAA+BuB,GAAW,CACpDb,OAAO,GAAD,OAAMc,EAAU,SAAW,OACjCb,QAASZ,KAAKE,WACbW,KAAKb,KAAKc,e,yBAGf,SAAYU,GACV,OAAOd,MAAM,GAAD,OAAKV,KAAKC,KAAV,iBAAyBuB,GAAW,CAC9Cb,OAAQ,SACRC,QAASZ,KAAKE,WACbW,KAAKb,KAAKc,iB,KAIJ,CAAQ,wC,OCvBNY,EA1DD,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,OAAQR,EAA8B,EAA9BA,KAAMS,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,SAGhCC,EAAgBC,SAASC,gBAAgBC,YAEzCC,EADcC,OAAOC,WACUN,EAErCO,2BAAgB,WACd,GAAKV,EAIL,OAFAI,SAASf,KAAKsB,MAAMC,SAAW,SAC/BR,SAASf,KAAKsB,MAAME,aAApB,UAAsCN,EAAtC,MACO,WACLH,SAASf,KAAKsB,MAAMC,SAAW,OAC/BR,SAASf,KAAKsB,MAAME,aAAe,QAEpC,CAACb,EAAQO,IAEZO,qBAAU,WACR,GAAKd,EAAL,CAGA,IAAMe,EAAgB,SAACC,GACP,WAAVA,EAAEC,KACJhB,KAKJ,OADAG,SAASc,iBAAiB,UAAWH,GAC9B,kBAAMX,SAASe,oBAAoB,UAAWJ,OAEpD,CAAEf,EAAQC,IASb,OACI,yBACImB,UAAS,2BAAwB5B,EAAxB,wBAA8CQ,EAAS,eAAiB,IACjFqB,QAVc,SAACL,GACjBA,EAAEM,SAAWN,EAAEO,eACjBtB,KAMA,SAIE,sBAAKmB,UAAS,iBAAuB,YAAT5B,EAAqB,SAAW,aAA5D,UACE,wBACI4B,UAAU,mBACVI,KAAK,SACLH,QAAUpB,IAEZC,QCjBGuB,MAlCf,YASI,IARFjC,EAQC,EARDA,KACAkC,EAOC,EAPDA,MAOC,IANDC,kBAMC,MANY,yDAMZ,EALDzB,EAKC,EALDA,SACAF,EAIC,EAJDA,OACAC,EAGC,EAHDA,QACA2B,EAEC,EAFDA,SACAC,EACC,EADDA,UAEA,OACI,cAAC,EAAD,CACI7B,OAASA,EACTR,KAAOA,EACPS,QAAUA,EAHd,SAKE,uBACImB,UAAU,cACV5B,KAAI,UAAOA,EAAP,SACJoC,SAAWA,EAHf,UAKE,oBAAIR,UAAU,eAAd,SAA+BM,IAC7BxB,EACF,wBACIkB,UAAU,uBACVI,KAAK,SAFT,SAIIK,EAAY,yEAAoBF,UCgC/BG,MA1Df,YAAoE,IAA3C9B,EAA0C,EAA1CA,OAAQC,EAAkC,EAAlCA,QAAS8B,EAAyB,EAAzBA,WAAYF,EAAa,EAAbA,UAEpD,EAAkCG,mBAAS,IAA3C,mBAAQC,EAAR,KAAkBC,EAAlB,KACA,EAA4CF,mBAAS,IAArD,mBAAQG,EAAR,KAAuBC,EAAvB,KAiBA,OACI,eAAC,EAAD,CACI5C,KAAK,OACLkC,MAAM,gEACNC,WAAW,6CACX3B,OAASA,EACT6B,UAAYA,EACZ5B,QAAUA,EACV2B,SAfa,SAACZ,GACpBA,EAAEqB,iBACFN,EAAW,CACTvC,KAAMyC,EACNrC,KAAMuC,KAIN,UASE,uBACI,aAAW,+KACXf,UAAU,wCACVkB,GAAG,cACHC,UAAU,KACVC,UAAU,IACVhD,KAAK,mBACLiD,YAAY,mDACZjB,KAAK,OACLkB,SAlCmB,SAAC1B,GAC5BkB,EAAYlB,EAAEM,OAAOqB,QAkCbA,MAAQV,IAEZ,sBAAMb,UAAU,0CAChB,uBACI,aAAW,mKACXA,UAAU,0CACVkB,GAAG,gBACH9C,KAAK,qBACLiD,YAAY,6HACZjB,KAAK,MACLkB,SAzC0B,SAAC1B,GACnCoB,EAAiBpB,EAAEM,OAAOqB,QAyClBA,MAAQR,IAEZ,sBAAMf,UAAU,gDCnBTwB,MAlCf,YAA0E,IAA/C5C,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,QAAS4C,EAA6B,EAA7BA,eAAgBhB,EAAa,EAAbA,UAEpDiB,EAAaC,mBAOnB,OACI,eAAC,EAAD,CACIvD,KAAK,SACLkC,MAAM,wFACNC,WAAW,yDACX3B,OAASA,EACT6B,UAAYA,EACZ5B,QAAUA,EACV2B,SAba,SAACZ,GACpBA,EAAEqB,iBACFQ,EAAeC,EAAWE,QAAQL,QAIhC,UASE,uBACI,aAAW,gLACXvB,UAAU,yCACVkB,GAAG,eACH9C,KAAK,mBACLiD,YAAY,+KACZQ,UAAQ,EACRzB,KAAK,MACL0B,IAAMJ,IAEV,sBAAM1B,UAAU,+CC2CT+B,MAvEf,YAAyE,IAA7CnD,EAA4C,EAA5CA,OAAQC,EAAoC,EAApCA,QAASmD,EAA2B,EAA3BA,aAAcvB,EAAa,EAAbA,UAEnDwB,EAAcC,qBAAWrF,GAE/B,EAA0B+D,mBAAS,IAAnC,mBAAQxC,EAAR,KAAc+D,EAAd,KACA,EAAwCvB,mBAAS,IAAjD,mBAAQwB,EAAR,KAAqBC,EAArB,KAuBA,OALA3C,qBAAU,WACRyC,EAAQF,EAAY7D,MACpBiE,EAAeJ,EAAY5D,SAC1B,CAAE4D,IAGD,eAAC,EAAD,CACI7D,KAAK,MACLkC,MAAM,4HACNC,WAAW,yDACX3B,OAASA,EACT6B,UAAYA,EACZ5B,QAAUA,EACV2B,SArBa,SAACZ,GACpBA,EAAEqB,iBACFe,EAAa,CACX5D,OAAMC,MAAO+D,KAWb,UASE,uBACI,aAAW,4GACXpC,UAAU,uCACVkB,GAAG,aACHC,UAAU,KACVC,UAAU,IACVhD,KAAK,iBACLiD,YAAY,8CACZQ,UAAQ,EACRzB,KAAK,OACLmB,MAAQnD,EACRkD,SA1Ce,SAAC1B,GACxBuC,EAAQvC,EAAEM,OAAOqB,UA2Cb,sBAAMvB,UAAU,yCAChB,uBACI,aAAW,8HACXA,UAAU,uCACVkB,GAAG,aACHC,UAAU,MACVC,UAAU,IACVhD,KAAK,iBACLiD,YAAY,+FACZQ,UAAQ,EACRzB,KAAK,OACLmB,MAAQa,EACRd,SApDsB,SAAC1B,GAC/ByC,EAAezC,EAAEM,OAAOqB,UAqDpB,sBAAMvB,UAAU,6CC7DTsC,MARf,WACE,OACI,wBAAQtC,UAAU,SAAlB,SACE,mBAAGA,UAAU,oBAAb,uCCHO,MAA0B,6CCmB1BuC,MAjBf,WACE,OACI,wBAAQvC,UAAU,sBAAlB,SACE,mBACIA,UAAU,eACVwC,KAAK,IAFT,SAIE,qBACIC,IAAI,gIACJzC,UAAU,eACV0C,IAAMC,SCULC,MApBf,YAAgD,IAA1BhE,EAAyB,EAAzBA,OAAQiE,EAAiB,EAAjBA,KAAMhE,EAAW,EAAXA,QAE1BL,EAAeqE,EAAfrE,KAAMJ,EAASyE,EAATzE,KAEd,OACI,eAAC,EAAD,CACIQ,OAASA,EACTC,QAAUA,EACVT,KAAK,UAHT,UAKE,qBACIqE,IAAG,wLAAyCrE,GAC5C4B,UAAU,eACV0C,IAAMlE,GAAc,KAExB,mBAAGwB,UAAU,iBAAb,SAAgC5B,QC4CzB0E,MA1Df,YAAyE,IAAzDC,EAAwD,EAAxDA,SAAUC,EAA8C,EAA9CA,YAAaC,EAAiC,EAAjCA,WAAYC,EAAqB,EAArBA,kBAE3CjB,EAAcC,qBAAWrF,GACvBuB,EAA0C2E,EAA1C3E,KAAMI,EAAoCuE,EAApCvE,KAAM2E,EAA8BJ,EAA9BI,MAAOC,EAAuBL,EAAvBK,MAAY3E,EAAWsE,EAAhBM,IAE5BC,EAAQF,EAAMC,MAAQpB,EAAYoB,IAClCE,EAA4B,qCACCD,EAAQ,GAAK,iBAG1C5E,EAAUyE,EAAMK,MAAK,SAAAC,GAAI,OAAIA,EAAKJ,MAAQpB,EAAYoB,OACtDK,EAA0B,iCACDhF,EAAU,cAAgB,IAczD,OACI,qBAAIsB,UAAU,gBAAd,UACE,qBAAKA,UAAU,2BAAf,SACE,qBAAKA,UAAU,yBAAf,SACE,qBACIA,UAAU,iBACV0C,IAAMlE,EACNiE,IAAG,wLAAyCrE,GAC5C6B,QApBU,WACtB+C,EAAYD,UAuBR,wBACI/C,UAAYuD,EACZnD,KAAK,SACLH,QAnBoB,WAC5BiD,EAAkBzE,MAoBd,sBAAKuB,UAAU,mBAAf,UACE,mBAAGA,UAAU,gBAAb,SAA+B5B,IAC/B,sBAAK4B,UAAU,4BAAf,UACE,wBACIA,UAAY0D,EACZtD,KAAK,SACLH,QA/BU,WACtBgD,EAAWF,MAgCH,sBAAM/C,UAAU,4BAAhB,SAA8CmD,EAAMQ,mBCqBjDC,MAvEf,YAQI,IAPFC,EAOC,EAPDA,MACAC,EAMC,EANDA,aACAC,EAKC,EALDA,cACAC,EAIC,EAJDA,WACAhB,EAGC,EAHDA,YACAC,EAEC,EAFDA,WACAC,EACC,EADDA,kBAGMjB,EAAcC,qBAAWrF,GAE/B,OACI,uBAAMmD,UAAU,kBAAhB,UACE,yBACI,aAAW,sHACXA,UAAU,wBAFd,SAIE,sBAAKA,UAAU,eAAf,UACE,sBAAKA,UAAU,0BAAf,UACE,qBACIyC,IAAI,mLACJzC,UAAU,kBACV0C,IAAMT,EAAY1D,SAEtB,wBACIyB,UAAU,6BACVC,QAAU6D,OAGhB,sBAAK9D,UAAU,mBAAf,UACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,gBAAd,SAAgCiC,EAAY7D,OAC5C,wBACI4B,UAAU,2BACVI,KAAK,SACLH,QAAU8D,OAGhB,mBAAG/D,UAAU,gBAAb,SAA+BiC,EAAY5D,WAE7C,wBACI2B,UAAU,0BACVI,KAAK,SACLH,QAAU+D,SAIlB,yBACI,aAAW,wIACXhE,UAAU,UAFd,SAIE,oBAAIA,UAAU,gBAAd,SACI6D,EAAMI,KAAI,SAACpB,GAAD,OACP,cAAC,EAAD,CACGE,SAAWF,EAEXG,YAAcA,EACdC,WAAaA,EACbC,kBAAoBA,GAHdL,EAAKQ,gBC9BhBa,MA5Bf,YAMI,IALFtF,EAKC,EALDA,OACA6B,EAIC,EAJDA,UACA5B,EAGC,EAHDA,QACA2B,EAEC,EAFDA,SACAqC,EACC,EADDA,KAQA,OACI,cAAC,EAAD,CACIzE,KAAK,UACLkC,MAAM,2DACNC,WAAW,eACX3B,OAASA,EACT6B,UAAYA,EACZ5B,QAAUA,EACV2B,SAbyB,SAACZ,GAChCA,EAAEqB,iBACFT,EAASqC,OCgMEsB,MA/Lf,WACE,MAAwCvD,mBAAS,CAC/C,KAAQ,GACR,MAAS,GACT,OAAU,GACV,IAAO,GACP,OAAU,KALZ,mBAAQqB,EAAR,KAAqBmC,EAArB,KAQA,EAA4BxD,mBAAS,IAArC,mBAAQiD,EAAR,KAAeQ,EAAf,KACA,EAA0CzD,mBAAS,CAAExC,KAAM,GAAII,KAAM,KAArE,mBAAQ8F,EAAR,KAAsBC,EAAtB,KACA,EAA8C3D,mBAAS,IAAvD,mBAAQ4D,EAAR,KAAwBC,EAAxB,KACA,EAA4D7D,oBAAS,GAArE,mBAAQ8D,EAAR,KAA+BC,EAA/B,KACA,EAA8D/D,oBAAS,GAAvE,mBAAQgE,EAAR,KAAgCC,EAAhC,KACA,EAAwDjE,oBAAS,GAAjE,mBAAQkE,EAAR,KAA6BC,EAA7B,KACA,EAAgEnE,oBAAS,GAAzE,mBAAQoE,EAAR,KAAiCC,EAAjC,KACA,EAAkDrE,oBAAS,GAA3D,mBAAQsE,EAAR,KAA0BC,EAA1B,KACA,EAAoCvE,oBAAS,GAA7C,mBAAQH,EAAR,KAAmB2E,EAAnB,KAiEMC,GAAiB,WACrBV,GAAyB,GACzBE,GAA0B,GAC1BE,GAAuB,GACvBI,GAAoB,GACpBF,GAA2B,GAC3BV,EAAgB,CAAEnG,KAAM,GAAII,KAAM,MAG9B8G,GAAoB,SAAC7E,GACzB2E,EAAa3E,IA2Cf,OAZAf,qBAAU,WACR3C,EAAIwI,YACCzH,MAAK,SAAC0H,GACLnB,EAASmB,MAEVC,OAAM,SAAAC,GACLC,QAAQC,IAAIF,MAElB3I,EAAI8I,cACC/H,MAAK,SAAAgI,GAAC,OAAI1B,EAAe0B,QAC7B,IAGC,cAACjJ,EAAmBkJ,SAApB,CAA6BxE,MAAQU,EAArC,SACE,qBAAKjC,UAAU,OAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,cAAC,EAAD,IACA,cAAC,EAAD,CACI6D,MAAQA,EACRC,aA/EgB,WAC5Ba,GAA0BD,IA+EdX,cA5EiB,WAC7Bc,GAA2BD,IA4EfZ,WAzEc,WAC1Be,GAAwBD,IAyEZ9B,YAtEU,SAACD,GACvBoC,GAAqBD,GACrBX,EAAgBxB,IAqEJE,WA7HS,SAACJ,GACtB,IAAMnE,EAAUmE,EAAKM,MAAMK,MAAK,SAAAC,GAAI,OAAIA,EAAKJ,MAAQpB,EAAYoB,OACjEtG,EAAIiJ,qBAAqBnD,EAAKQ,IAAK3E,GAASZ,MAAK,SAACmI,GAChD5B,GAAS,SAACR,GAAD,OAAWA,EAAMI,KAAI,SAACiC,GAAD,OAAOA,EAAE7C,MAAQR,EAAKQ,IAAM4C,EAAUC,WACnET,OAAM,SAAAU,GAAG,OAAIR,QAAQC,IAAIO,OA0HhBjD,kBAzGgB,SAACzE,GAC7BwG,GAA4BD,GAC5BP,EAAkBhG,MAyGV,cAAC,EAAD,IAEA,cAAC,EAAD,CACIG,OAAS8F,EACTjE,UAAYA,EACZ5B,QAAUwG,GACV5D,eA/Ca,SAAC2E,GAC1Bd,IAAkB,GAClBvI,EAAIsJ,cAAcD,GACbtI,MAAK,SAACwI,GACLlC,EAAekC,GACfjB,QAEDI,QACAc,SAAQ,WACPjB,IAAkB,SAyChB,cAAC,EAAD,CACI1G,OAASgG,EACTnE,UAAYA,EACZ5B,QAAUwG,GACVrD,aAnEW,SAACwE,GACxBlB,IAAkB,GAClBvI,EAAI0J,YAAYD,GACX1I,MAAK,SAAC4I,GACLtC,EAAesC,GACfrB,QAEDI,QACAc,SAAQ,WACPjB,IAAkB,SA6DhB,cAAC,EAAD,CACI1G,OAASkG,EACTrE,UAAYA,EACZ5B,QAAUwG,GACV1E,WA5Ie,SAACkC,GAC5ByC,IAAkB,GAClBvI,EAAI4J,eAAe9D,GACd/E,MAAK,SAAC8I,GACLvC,EAAS,CAAEuC,GAAH,mBAAsB/C,KAC9BwB,QAEDI,QACAc,SAAQ,WACPjB,IAAkB,SAsIhB,cAAC,EAAD,CACI1G,OAASoG,EACTvE,UAAYA,EACZ5B,QAAUwG,GACV7E,SAjIW,SAACgE,GACxBc,IAAkB,GAClBvI,EAAI8J,YAAYrC,GACX1G,MAAK,WACJuG,GAAS,SAACR,GAAD,OAAWA,EAAMiD,QAAO,SAAAZ,GAAC,OAAIA,EAAE7C,MAAQmB,QAChDa,QAEDI,OAAM,SAAAU,GAAG,OAAIR,QAAQC,IAAIO,MACzBI,SAAQ,WACPjB,IAAkB,OAyHZzC,KAAO2B,IAGX,cAAC,EAAD,CACI5F,OAASsG,EACTrC,KAAOyB,EACPzF,QAAUwG,aC/L1B0B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFjI,SAASkI,eAAe,U","file":"static/js/main.6c3b9f78.chunk.js","sourcesContent":["import { createContext } from \"react\"\n\nexport const CurrentUserContext = createContext()\n","class Api {\n  constructor( token ) {\n    this._url = \"https://nomoreparties.co/v1/cohort-30/\"\n    this._headers = {\n      authorization: token,\n      \"Content-Type\": \"application/json\"\n    }\n  }\n  \n  _onResponse(res) {\n    if (res.ok) {\n      return res.json()\n    }\n    return Promise.reject(`>>> Ошибка: ${ res.status }`)\n  }\n  \n  getUserInfo() {\n    return fetch(`${ this._url }users/me/`, {\n      method: \"GET\",\n      headers: this._headers\n    }).then(this._onResponse)\n  }\n  \n  setUserInfo(userInfo) {\n    return fetch(`${ this._url }users/me/`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify(\n          {\n            name: userInfo.name,\n            about: userInfo.about,\n          }\n      )\n    }).then(this._onResponse)\n  }\n  \n  setUserAvatar(avatarLink) {\n    return fetch(`${ this._url }users/me/avatar/`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify(\n          {\n            avatar: avatarLink\n          }\n      )\n    }).then(this._onResponse)\n  }\n  \n  getPlaces() {\n    return fetch(`${ this._url }cards`, {\n      method: \"GET\",\n      headers: this._headers\n    }).then(this._onResponse)\n  }\n  \n  createNewPlace({ name, link }) {\n    return fetch(`${ this._url }cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(\n          {\n            name: name,\n            link: link\n          }\n      )\n    }).then(this._onResponse)\n  }\n  \n  changeLikeCardStatus(cardId, isLiked) {\n    return fetch(`${ this._url }cards/likes/${ cardId }`, {\n      method: `${ isLiked ? \"DELETE\" : \"PUT\" }`,\n      headers: this._headers,\n    }).then(this._onResponse)\n  }\n  \n  removePlace(cardId) {\n    return fetch(`${ this._url }cards/${ cardId }`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(this._onResponse)\n  }\n}\n\n const api = new Api(\"a2e8d35a-8087-4045-b36f-fee28ac34f65\")\n\nexport default api\n","import { useEffect, useLayoutEffect } from \"react\"\n\nconst Popup = ({ isOpen, name, onClose, children }) => {\n  \n  \n  const documentWidth = document.documentElement.clientWidth;\n  const windowWidth = window.innerWidth;\n  const scrollBarWidth = windowWidth - documentWidth;\n  \n  useLayoutEffect(() => {\n    if (!isOpen) return\n    \n    document.body.style.overflow = \"hidden\"\n    document.body.style.paddingRight = `${scrollBarWidth}px`;\n    return () => {\n      document.body.style.overflow = \"auto\"\n      document.body.style.paddingRight = null;\n    }\n  }, [isOpen, scrollBarWidth])\n  \n  useEffect(() => {\n    if (!isOpen) return\n    \n    \n    const closeByEscape = (e) => {\n      if (e.key === \"Escape\") {\n        onClose()\n      }\n    }\n    \n    document.addEventListener(\"keydown\", closeByEscape)\n    return () => document.removeEventListener(\"keydown\", closeByEscape)\n    \n  }, [ isOpen, onClose ])\n  \n  const handleOverlay = (e) => {\n    if (e.target === e.currentTarget) {\n      onClose()\n    }\n  }\n  \n  \n  return (\n      <section\n          className={ `modal modal_type_${ name } page__modal ${ isOpen ? \"modal_active\" : \"\" }` }\n          onClick={ handleOverlay }\n      >\n        <div className={ `modal__${ name === \"picture\" ? \"figure\" : \"container\" }` }>\n          <button\n              className=\"modal__close-btn\"\n              type=\"button\"\n              onClick={ onClose }\n          />\n          { children }\n        </div>\n      \n      </section>\n  )\n}\n\nexport default Popup\n","import Popup from \"./Popup\"\n\nfunction PopupWithForm({\n  name,\n  title,\n  buttonText = \"Сохранить\",\n  children,\n  isOpen,\n  onClose,\n  onSubmit,\n  isLoading\n}) {\n  return (\n      <Popup\n          isOpen={ isOpen }\n          name={ name }\n          onClose={ onClose }\n      >\n        <form\n            className=\"modal__form\"\n            name={ `${ name }-form` }\n            onSubmit={ onSubmit }\n        >\n          <h2 className=\"modal__title\">{ title }</h2>\n          { children }\n          <button\n              className=\"button modal__button\"\n              type=\"submit\"\n          >\n            { isLoading ? \"⏳ Сохранение...\" : buttonText }\n          </button>\n        </form>\n      </Popup>\n  )\n}\n\nexport default PopupWithForm\n","import { useState } from \"react\"\nimport PopupWithForm from \"./PopupWithForm\"\n\nfunction AddPlacePopup({ isOpen, onClose, onPlaceAdd, isLoading }) {\n  \n  const [ cardName, setCardName ] = useState(\"\")\n  const [ cardImageLink, setCardImageLink ] = useState(\"\")\n  \n  const handleCardNameChange = (e) => {\n    setCardName(e.target.value)\n  }\n  \n  const handleCardDescriptionChange = (e) => {\n    setCardImageLink(e.target.value)\n  }\n  \n  const handleSubmit = (e) => {\n    e.preventDefault()\n    onPlaceAdd({\n      name: cardName,\n      link: cardImageLink\n    })\n  }\n  return (\n      <PopupWithForm\n          name=\"card\"\n          title=\"Новое место\"\n          buttonText=\"Создать\"\n          isOpen={ isOpen }\n          isLoading={ isLoading }\n          onClose={ onClose }\n          onSubmit={ handleSubmit }\n      >\n        <input\n            aria-label=\"Поле ввода для названия карточки\"\n            className=\"modal__input modal__input_field_title\"\n            id=\"field_title\"\n            maxLength=\"30\"\n            minLength=\"2\"\n            name=\"card-field-title\"\n            placeholder=\"Название\"\n            type=\"text\"\n            onChange={ handleCardNameChange }\n            value={ cardName }\n        />\n        <span className=\"modal__error modal__error_field_title\"/>\n        <input\n            aria-label=\"Поле ввода для адреса картинки\"\n            className=\"modal__input modal__input_field_picture\"\n            id=\"field_picture\"\n            name=\"card-field-picture\"\n            placeholder=\"Ссылочка на картиночку\"\n            type=\"url\"\n            onChange={ handleCardDescriptionChange }\n            value={ cardImageLink }\n        />\n        <span className=\"modal__error modal__error_field_picture\"/>\n      </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup\n","import { useRef } from \"react\"\nimport PopupWithForm from \"./PopupWithForm\"\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\n  \n  const userAvatar = useRef()\n  \n  const handleSubmit = (e) => {\n    e.preventDefault()\n    onUpdateAvatar(userAvatar.current.value)\n  }\n  \n  return (\n      <PopupWithForm\n          name=\"avatar\"\n          title=\"Обновить аватар\"\n          buttonText=\"Сохранить\"\n          isOpen={ isOpen }\n          isLoading={ isLoading }\n          onClose={ onClose }\n          onSubmit={ handleSubmit }\n      >\n        <input\n            aria-label=\"Поле ввода для ссылки на картинку\"\n            className=\"modal__input modal__input_field_avatar\"\n            id=\"field_avatar\"\n            name=\"avatar-field-url\"\n            placeholder=\"Ссылка на новую картинку профиля\"\n            required\n            type=\"url\"\n            ref={ userAvatar }\n        />\n        <span className=\"modal__error modal__error_field_avatar\"/>\n      </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup\n","import { useContext, useEffect, useState } from \"react\"\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\"\nimport PopupWithForm from \"./PopupWithForm\"\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoading }) {\n  \n  const currentUser = useContext(CurrentUserContext)\n  \n  const [ name, setName ] = useState(\"\")\n  const [ description, setDescription ] = useState(\"\")\n  \n  const handleNameChange = (e) => {\n    setName(e.target.value)\n  }\n  \n  const handleDescriptionChange = (e) => {\n    setDescription(e.target.value)\n  }\n  \n  const handleSubmit = (e) => {\n    e.preventDefault()\n    onUpdateUser({\n      name, about: description,\n    })\n    \n  }\n  \n  useEffect(() => {\n    setName(currentUser.name)\n    setDescription(currentUser.about)\n  }, [ currentUser ])\n  \n  return (\n      <PopupWithForm\n          name=\"bio\"\n          title=\"Редактировать профиль\"\n          buttonText=\"Сохранить\"\n          isOpen={ isOpen }\n          isLoading={ isLoading }\n          onClose={ onClose }\n          onSubmit={ handleSubmit }\n      >\n        <input\n            aria-label=\"Поле ввода для имени\"\n            className=\"modal__input modal__input_field_name\"\n            id=\"field_name\"\n            maxLength=\"40\"\n            minLength=\"2\"\n            name=\"bio-field-name\"\n            placeholder=\"Ваше имя\"\n            required\n            type=\"text\"\n            value={ name }\n            onChange={ handleNameChange }\n        />\n        <span className=\"modal__error modal__error_field_name\"/>\n        <input\n            aria-label=\"Поле ввода для описания\"\n            className=\"modal__input modal__input_field_desc\"\n            id=\"field_desc\"\n            maxLength=\"200\"\n            minLength=\"2\"\n            name=\"bio-field-desc\"\n            placeholder=\"Расскажите о себе\"\n            required\n            type=\"text\"\n            value={ description }\n            onChange={ handleDescriptionChange }\n        />\n        <span className=\"modal__error modal__error_field_desc\"/>\n      </PopupWithForm>\n  \n  )\n}\n\nexport default EditProfilePopup\n","function Footer() {\n  return (\n      <footer className=\"footer\">\n        <p className=\"footer__copyright\">© 2021 Mesto Russia</p>\n      </footer>\n  )\n}\n\nexport default Footer\n","export default __webpack_public_path__ + \"static/media/logo_color_white.7185dafb.svg\";","import headerLogo from \"../images/logo/logo_color_white.svg\"\n\nfunction Header() {\n  return (\n      <header className=\"header page__header\">\n        <a\n            className=\"header__link\"\n            href=\"#\"\n        >\n          <img\n              alt=\"Логотип сервиса «Место».\"\n              className=\"header__logo\"\n              src={ headerLogo }\n          />\n        </a>\n      </header>\n  )\n}\n\nexport default Header\n","import Popup from \"./Popup\"\n\nfunction ImagePopup({ isOpen, card, onClose }) {\n  \n  const { link, name } = card\n  \n  return (\n      <Popup\n          isOpen={ isOpen }\n          onClose={ onClose }\n          name=\"picture\"\n      >\n        <img\n            alt={ `Фотография из карточки. Название: ${ name }` }\n            className=\"modal__image\"\n            src={ link ? link : \"\" }\n        />\n        <p className=\"modal__caption\">{ name }</p>\n      </Popup>\n  )\n}\n\nexport default ImagePopup\n","import React, { useContext } from \"react\"\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\"\n\nfunction Card({ cardData, onCardClick, onCardLike, onCardDeleteClick }) {\n  \n  const currentUser = useContext(CurrentUserContext)\n  const { name, link, likes, owner, _id: cardId } = cardData\n  \n  const isOwn = owner._id === currentUser._id\n  const galleryDeleteButtonClassName = (\n      `delete gallery__delete-btn ${ isOwn ? \"\" : \"delete_hidden\" }`\n  )\n  \n  const isLiked = likes.some(like => like._id === currentUser._id)\n  const galleryLikeButtonClassName = (\n      `like gallery__like-btn ${ isLiked ? \"like_active\" : \"\" }`)\n  \n  const handleCardClick = () => {\n    onCardClick(cardData)\n  }\n  \n  const handleLikeClick = () => {\n    onCardLike(cardData)\n  }\n  \n  const handleCardDeleteClick = () => {\n    onCardDeleteClick(cardId)\n  }\n  \n  return (\n      <li className=\"gallery__item\">\n        <div className=\"gallery__image-container\">\n          <div className=\"gallery__image-wrapper\">\n            <img\n                className=\"gallery__image\"\n                src={ link }\n                alt={ `Карточка с фотографией. Название: ${ name }` }\n                onClick={ handleCardClick }\n            />\n          </div>\n        </div>\n        <button\n            className={ galleryDeleteButtonClassName }\n            type=\"button\"\n            onClick={ handleCardDeleteClick }\n        />\n        <div className=\"gallery__caption\">\n          <p className=\"gallery__text\">{ name }</p>\n          <div className=\"gallery__like-btn-wrapper\">\n            <button\n                className={ galleryLikeButtonClassName }\n                type=\"button\"\n                onClick={ handleLikeClick }\n            />\n            <span className=\"gallery__like-btn-counter\">{ likes.length }</span>\n          </div>\n        </div>\n      </li>\n  )\n}\n\nexport default Card\n","import { useContext } from \"react\"\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\"\nimport Card from \"./Card\"\n\nfunction Main({\n  cards,\n  onEditAvatar,\n  onEditProfile,\n  onAddPlace,\n  onCardClick,\n  onCardLike,\n  onCardDeleteClick\n}) {\n  \n  const currentUser = useContext(CurrentUserContext)\n  \n  return (\n      <main className=\"main page__main\">\n        <section\n            aria-label=\"Профиль пользователя\"\n            className=\"profile main__profile\"\n        >\n          <div className=\"profile__bio\">\n            <div className=\"profile__avatar-wrapper\">\n              <img\n                  alt=\"Фотография профиля пользователя\"\n                  className=\"profile__avatar\"\n                  src={ currentUser.avatar }\n              />\n              <button\n                  className=\"button profile__avatar-btn\"\n                  onClick={ onEditAvatar }\n              />\n            </div>\n            <div className=\"profile__details\">\n              <div className=\"profile__row\">\n                <h1 className=\"profile__name\">{ currentUser.name }</h1>\n                <button\n                    className=\"button profile__edit-btn\"\n                    type=\"button\"\n                    onClick={ onEditProfile }\n                />\n              </div>\n              <p className=\"profile__desc\">{ currentUser.about }</p>\n            </div>\n            <button\n                className=\"button profile__add-btn\"\n                type=\"button\"\n                onClick={ onAddPlace }\n            />\n          </div>\n        </section>\n        <section\n            aria-label=\"Фотографии пользователя\"\n            className=\"gallery\"\n        >\n          <ul className=\"gallery__grid\">\n            { cards.map((card) =>\n                (<Card\n                    cardData={ card }\n                    key={ card._id }\n                    onCardClick={ onCardClick }\n                    onCardLike={ onCardLike }\n                    onCardDeleteClick={ onCardDeleteClick }\n                />)\n            )\n            }\n          </ul>\n        </section>\n      \n      </main>\n  \n  )\n}\n\nexport default Main\n","import PopupWithForm from \"./PopupWithForm\"\n\nfunction PopupWithConfirmation({\n  isOpen,\n  isLoading,\n  onClose,\n  onSubmit,\n  card\n}) {\n  \n  const handleConfirmationAction = (e) => {\n    e.preventDefault()\n    onSubmit(card)\n  }\n  \n  return (\n      <PopupWithForm\n          name=\"confirm\"\n          title=\"Вы уверены?\"\n          buttonText=\"Да\"\n          isOpen={ isOpen }\n          isLoading={ isLoading }\n          onClose={ onClose }\n          onSubmit={ handleConfirmationAction }\n      >\n      </PopupWithForm>\n  )\n  \n}\n\nexport default PopupWithConfirmation\n","import \"../index.css\"\nimport { useEffect, useState } from \"react\"\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\"\nimport api from \"../utils/api\"\nimport AddPlacePopup from \"./AddPlacePopup\"\nimport EditAvatarPopup from \"./EditAvatarPopup\"\nimport EditProfilePopup from \"./EditProfilePopup\"\nimport Footer from \"./Footer\"\nimport Header from \"./Header\"\nimport ImagePopup from \"./ImagePopup\"\nimport Main from \"./Main\"\nimport PopupWithConfirmation from \"./PopupWithConfirmation\"\n\nfunction App() {\n  const [ currentUser, setCurrentUser ] = useState({\n    \"name\": \"\",\n    \"about\": \"\",\n    \"avatar\": \"\",\n    \"_id\": \"\",\n    \"cohort\": \"\"\n  })\n  \n  const [ cards, setCards ] = useState([])\n  const [ selectedCard, setSelectedCard ] = useState({ name: \"\", link: \"\" })\n  const [ cardToRemoveId, setCardToRemoveId ] = useState(\"\")\n  const [ isEditAvatarPopupOpen, setIsEditAvatarPopupOpen ] = useState(false)\n  const [ isEditProfilePopupOpen, setIsEditProfilePopupOpen ] = useState(false)\n  const [ isAddPlacePopupOpen, setIsAddPlacePopupOpen ] = useState(false)\n  const [ isConfirmationPopupOpen, setIsConfirmationPopupOpen ] = useState(false)\n  const [ isImagePopupOpen, setIsImagePopupOpen ] = useState(false)\n  const [ isLoading, setIsLoading ] = useState(false)\n  \n  // Элементы UI блока карточек\n  \n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(like => like._id === currentUser._id)\n    api.changeLikeCardStatus(card._id, isLiked).then((newCard) => {\n      setCards((cards) => cards.map((c) => c._id === card._id ? newCard : c))\n    }).catch(err => console.log(err))\n  }\n  \n  \n  const handleAddPlaceSubmit = (card) => {\n    handlePopupLoader(true)\n    api.createNewPlace(card)\n        .then((newFetchedCard) => {\n          setCards([ newFetchedCard, ...cards ])\n          closeAllPopups()\n        })\n        .catch()\n        .finally(() => {\n          handlePopupLoader(false)\n        })\n  }\n  \n  const handleCardDeleteClick = (cardId) => {\n    setIsConfirmationPopupOpen(!isConfirmationPopupOpen)\n    setCardToRemoveId(cardId)\n  }\n  \n  const handleCardDelete = (cardToRemoveId) => {\n    handlePopupLoader(true)\n    api.removePlace(cardToRemoveId)\n        .then(() => {\n          setCards((cards) => cards.filter(c => c._id !== cardToRemoveId))\n          closeAllPopups()\n        })\n        .catch(err => console.log(err))\n        .finally(() => {\n          handlePopupLoader(false)\n        })\n    \n  }\n  \n  // Элементы UI в профиле\n  \n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen)\n  }\n  \n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen)\n  }\n  \n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen)\n  }\n  \n  const handleCardClick = (cardData) => {\n    setIsImagePopupOpen(!isImagePopupOpen)\n    setSelectedCard(cardData)\n  }\n  \n  // Элементы UI в попапах\n  \n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false)\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsImagePopupOpen(false)\n    setIsConfirmationPopupOpen(false)\n    setSelectedCard({ name: \"\", link: \"\" })\n  }\n  \n  const handlePopupLoader = (isLoading) => {\n    setIsLoading(isLoading)\n  }\n  \n  const handleUpdateUser = (newUserInfo) => {\n    handlePopupLoader(true)\n    api.setUserInfo(newUserInfo)\n        .then((newFetchedData) => {\n          setCurrentUser(newFetchedData)\n          closeAllPopups()\n        })\n        .catch()\n        .finally(() => {\n          handlePopupLoader(false)\n        })\n  }\n  \n  const handleUpdateAvatar = (newAvatar) => {\n    handlePopupLoader(true)\n    api.setUserAvatar(newAvatar)\n        .then((newFetchedAvatar) => {\n          setCurrentUser(newFetchedAvatar)\n          closeAllPopups()\n        })\n        .catch()\n        .finally(() => {\n          handlePopupLoader(false)\n        })\n  }\n  \n  // Изначальный фетч с сервера\n  \n  useEffect(() => {\n    api.getPlaces()\n        .then((places) => {\n          setCards(places)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    api.getUserInfo()\n        .then(r => setCurrentUser(r))\n  }, [])\n  \n  return (\n      <CurrentUserContext.Provider value={ currentUser }>\n        <div className=\"page\">\n          <div className=\"page__container\">\n            <Header/>\n            <Main\n                cards={ cards }\n                onEditAvatar={ handleEditAvatarClick }\n                onEditProfile={ handleEditProfileClick }\n                onAddPlace={ handleAddPlaceClick }\n                onCardClick={ handleCardClick }\n                onCardLike={ handleCardLike }\n                onCardDeleteClick={ handleCardDeleteClick }\n            />\n            <Footer/>\n            \n            <EditAvatarPopup\n                isOpen={ isEditAvatarPopupOpen }\n                isLoading={ isLoading }\n                onClose={ closeAllPopups }\n                onUpdateAvatar={ handleUpdateAvatar }\n            />\n            \n            <EditProfilePopup\n                isOpen={ isEditProfilePopupOpen }\n                isLoading={ isLoading }\n                onClose={ closeAllPopups }\n                onUpdateUser={ handleUpdateUser }\n            />\n            \n            <AddPlacePopup\n                isOpen={ isAddPlacePopupOpen }\n                isLoading={ isLoading }\n                onClose={ closeAllPopups }\n                onPlaceAdd={ handleAddPlaceSubmit }\n            />\n            \n            <PopupWithConfirmation\n                isOpen={ isConfirmationPopupOpen }\n                isLoading={ isLoading }\n                onClose={ closeAllPopups }\n                onSubmit={ handleCardDelete }\n                card={ cardToRemoveId }\n            />\n            \n            <ImagePopup\n                isOpen={ isImagePopupOpen }\n                card={ selectedCard }\n                onClose={ closeAllPopups }\n            />\n          </div>\n        </div>\n      </CurrentUserContext.Provider>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}